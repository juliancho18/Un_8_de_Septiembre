<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>¿Qué pasó un 8 de septiembre?</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='logo_xxx.ico') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

  <style>
    /* ====== Ajustes base ====== */
    body{ background-image:url('{{ url_for("static", filename="Galaxia_3.jpg") }}'); }
    .page-wrap{ position:relative; z-index:1; }

    /* ====== Prólogo 2 fotos ====== */
    .prologue-duo{
      display:grid; grid-template-columns:1fr; gap:14px;
      width:min(96vw, 980px); margin:10px auto 4px;
    }
    @media(min-width:720px){ .prologue-duo{ grid-template-columns:1fr 1fr; } }
    .pro-card{ position:relative; border-radius:16px; overflow:hidden; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); box-shadow:0 12px 34px rgba(0,0,0,.38); transition:.25s; }
    .pro-card:hover{ transform:translateY(-2px); box-shadow:0 18px 48px rgba(0,0,0,.5); }
    .pro-card img{ width:100%; height:100%; object-fit:cover; display:block; }
    .pro-cap{ position:absolute; left:0; right:0; bottom:0; padding:10px 14px; background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,.1)); text-align:center; font-family:"Orbitron",sans-serif; font-size:.95rem; color:rgba(255,255,255,.92); }

    /* ====== Aviso cielo ====== */
    .sky-warning{ text-align:center; margin:14px 0 10px; color:#ffd86b; font-family:"Orbitron",sans-serif; letter-spacing:.4px; animation:skyBlink 2.2s ease-in-out infinite; }
    @keyframes skyBlink{ 0%,100%{opacity:.35;transform:translateY(0)} 50%{opacity:1;transform:translateY(-2px)} }

    /* ====== Cielo con pulso y cortina ====== */
    .sky-glow{ position:relative; width:min(96vw,900px); margin:12px auto 6px; border-radius:18px; overflow:hidden; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.12); box-shadow:0 14px 40px rgba(0,0,0,.42); }
    .sky-glow img{ display:block; width:100%; height:auto; transform:scale(1.01); filter:brightness(1.02) saturate(1.05); animation:skyPulse 12s ease-in-out infinite; }
    .glow-curtain{ position:absolute; inset:0; pointer-events:none; background: radial-gradient(ellipse at 50% 20%, rgba(0,0,0,0), rgba(0,0,0,.5) 65%), rgba(0,0,0,.12); opacity:0; animation: curtainFade 12s ease-in-out infinite; }
    @keyframes skyPulse{ 0%{filter:brightness(1.12) saturate(1.08) scale(1.012)} 35%{filter:brightness(1.18) saturate(1.12) scale(1.016)} 60%{filter:brightness(.92) scale(1.01)} 85%{filter:brightness(.85) scale(1.008)} 100%{filter:brightness(1.12) saturate(1.08) scale(1.012)} }
    @keyframes curtainFade{ 0%,28%{opacity:0} 46%,72%{opacity:.6} 100%{opacity:0} }

    /* ====== Lluvia de fugaces sobre el cielo ====== */
    .stars-layer{ position:absolute; inset:0; pointer-events:none; overflow:hidden; }
    .tiny-star{ position:absolute; width:12px; height:12px; opacity:0; background:url('{{ url_for("static", filename="estrella_fugaz.png") }}') no-repeat center/contain; filter:drop-shadow(0 0 4px rgba(255,255,255,.85)); }
    @keyframes diag-ne{ 0%{transform:translate(0,0) rotate(20deg);opacity:0} 10%{opacity:1} 100%{transform:translate(420px,420px) rotate(20deg);opacity:0} }
    @keyframes diag-nw{ 0%{transform:translate(0,0) rotate(-18deg);opacity:0}10%{opacity:1}100%{transform:translate(-420px,420px) rotate(-18deg);opacity:0} }
    @keyframes diag-s { 0%{transform:translate(0,0) rotate(10deg);opacity:0} 10%{opacity:1} 100%{transform:translate(120px,460px) rotate(10deg);opacity:0} }

    /* ====== Capa terrenal ====== */
    .maravillas-block{ margin:34px 0 8px; }
    .freq-bar{ position:relative; width:min(1040px,96vw); height:2px; margin:14px auto 18px; background:linear-gradient(90deg, transparent, #6bdcff, transparent); }
    .freq-bar::before,.freq-bar::after{ content:""; position:absolute; left:0; right:0; top:-10px; bottom:-10px; background: radial-gradient(circle at 10% 50%, rgba(107,220,255,.12), transparent 35%), radial-gradient(circle at 90% 50%, rgba(107,220,255,.12), transparent 35%); animation:pulseFreq 2.1s ease-in-out infinite; }
    @keyframes pulseFreq{ 0%,100%{opacity:.35} 50%{opacity:.9} }

    .info-top{ font-family:"Orbitron",sans-serif; text-align:center; background:linear-gradient(180deg, rgba(0,0,0,.55), transparent); padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.12); width:min(92vw,840px); margin:auto; }
    .info-top h3{ margin:.2rem 0 .35rem; color:#6bdcff; font-size:1.25rem; letter-spacing:.4px; animation:titleFloat 6.5s ease-in-out infinite; }
    @keyframes titleFloat{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-3px)} }
    .maravilla-figure{ position:relative; width:min(92vw,840px); aspect-ratio:16/9; border-radius:16px; overflow:hidden; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); box-shadow:0 12px 36px rgba(0,0,0,.44); margin:10px auto; }
    .maravilla-figure img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0; transform:scale(.9); }
    .maravilla-figure img.show{ animation:revealPic 1200ms cubic-bezier(.22,.8,.25,1) forwards; }
    .maravilla-figure img.hide{ animation:hidePic 900ms cubic-bezier(.4,.0,.6,1) forwards; }
    @keyframes revealPic{ 0%{opacity:0;transform:scale(.86)} 40%{opacity:1;transform:scale(1.02)} 100%{opacity:1;transform:scale(1)} }
    @keyframes hidePic{ 0%{opacity:1;transform:scale(1)} 100%{opacity:0;transform:scale(.82)} }
    .info-box{ width:min(92vw,840px); background:rgba(0,0,0,.42); border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:14px 16px; line-height:1.7; opacity:.96; box-shadow:0 10px 28px rgba(0,0,0,.35); margin:10px auto 0; }
    .nice-list{ margin:.6rem 0 .2rem 1rem; }
    .nice-list li{ margin:.25rem 0; }

    /* ====== Foto flotante "Dara Joana" ====== */
    .dara-float{ position:relative; width:min(92vw,680px); margin:18px auto 10px; }
    .dara-card{ position:relative; overflow:hidden; border-radius:16px; border:1px solid rgba(255,255,255,.12); box-shadow:0 16px 42px rgba(0,0,0,.5); background:rgba(255,255,255,.05); }
    .dara-card img{ width:100%; height:auto; display:block; transform:translateZ(0); animation:floatSoft 7s ease-in-out infinite; }
    @keyframes floatSoft{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }
    .dara-badge{ position:absolute; left:14px; top:14px; padding:.35rem .7rem; border-radius:999px; font-family:"Orbitron",sans-serif; font-size:.95rem; background:linear-gradient(90deg,#1b1b1f,#2e2742); color:#fff; border:1px solid rgba(255,255,255,.15); }

    /* ====== Mascotas (GIFs) ====== */
    .pets-wrap{ width:min(96vw,980px); margin:14px auto; display:grid; grid-template-columns:1fr; gap:12px; }
    @media(min-width:820px){ .pets-wrap{ grid-template-columns:1fr 1fr; } }
    .pet-card{ position:relative; border-radius:16px; overflow:hidden; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); box-shadow:0 12px 34px rgba(0,0,0,.38); }
    .pet-card img{ width:100%; height:280px; object-fit:cover; display:block; }
    .pet-caption{ position:absolute; left:0; right:0; bottom:0; padding:10px 14px; text-align:center; font-family:"Orbitron",sans-serif; background:linear-gradient(to top, rgba(0,0,0,.6), rgba(0,0,0,.1)); opacity:.0; transform:translateY(8px); transition:.4s; }
    .pet-card.on .pet-caption{ opacity:1; transform:translateY(0); }

    /* ====== Estrella fugaz global ====== */
    #shootingStar{ position:fixed; top:var(--y0); left:var(--x0); width:50px; height:auto; opacity:0; pointer-events:none; z-index:6; transform:translate3d(0,0,0); }
    #shootingStar.shooting{ opacity:1; animation:starMove var(--dur) linear forwards; }
    @keyframes starMove{ from{transform:translate3d(0,0,0)} to{ transform:translate3d(calc(var(--x1) - var(--x0)), calc(var(--y1) - var(--y0)), 0)} }
  </style>
</head>

<body>
  <div class="bg-overlay"></div>

  <!-- Estrella fugaz global -->
  <img id="shootingStar" src="{{ url_for('static', filename='estrella_fugaz.png') }}" alt="Estrella fugaz" />

  <!-- Audio -->
  <audio id="bgm" preload="auto" playsinline></audio>

  <header class="sticky">
    <div class="header-controls">
      <button id="hdrPrev" class="h-btn" title="Anterior">«</button>
      <button id="hdrPlay" class="h-btn" title="Reproducir/Pausar">▶</button>
      <button id="hdrNext" class="h-btn" title="Siguiente">»</button>
      <button id="hdrRepeat" class="h-btn" title="Repetir">⟳</button>
    </div>
    <div id="nowPlaying" class="now-playing">Ambientación lista</div>
    <h1 class="title-mystic">¿Qué pasó un 8 de septiembre?</h1>
    <div id="trackBar" class="marquee" style="font-size:0.92rem; opacity:0.9;">
      <span id="trackText">Ambientación lista</span>
    </div>
  </header>

  <main class="page-wrap">
    <!-- ===== Prólogo ===== -->
    <section class="reveal">
      <h2 class="h-sub">Prólogo</h2>
      <p>El tiempo empezó cuando alguien miró el cielo y entendió que el Sol regresaba. Así nacieron los días, y con ellos los cumpleaños: pequeñas marcas que el universo dibuja para recordarnos que la vida tiene ritmo.</p>
      <p><strong>8 de septiembre</strong> no es un día cualquiera; es un compás secreto donde el cielo se acomoda distinto. Esa tarde, el Sol se inclina con una delicadeza especial y regala lo que tú llamas <em>“besitos de sol”</em>: caricias doradas que rozan la piel y pintan el mundo de un morado suave antes de entregarlo a la noche.</p>
      <p>Cada año, cuando el calendario llega a esta fecha, parece repetirse el mismo ritual: el cielo baja la intensidad, la luz se convierte en poesía y la atmósfera entera susurra un mensaje silencioso. Ese mensaje eres tú. Porque lo importante del 8 de septiembre no está en los relojes ni en los almanaques: está en la manera en que el Sol decide besar la Tierra, como anunciando que aquí nació alguien que sabe transformar la tarde en eternidad.</p>
    </section>

    <!-- Prólogo: 2 fotos -->
    <section class="reveal">
      <div class="prologue-duo">
        <figure class="pro-card">
          <img src="{{ url_for('static', filename='atardecer.jpg') }}" alt="Atardecer dorado">
          <figcaption class="pro-cap">“Besitos de sol”: dorado que ordena la tarde.</figcaption>
        </figure>
        <figure class="pro-card">
          <img src="{{ url_for('static', filename='atardecer2.jpg') }}" alt="Atardecer morado suave">
          <figcaption class="pro-cap">Morado suave: la luz se vuelve poesía.</figcaption>
        </figure>
      </div>
    </section>

    <!-- El cielo -->
    <section class="reveal">
      <h2 class="h-sub">El cielo del 8 de septiembre</h2>
      <p>Ese día, el cielo se comporta como un director que levanta la mano y pide silencio. Las nubes bajan el volumen, la luz afina el color, y la brisa lleva un mensaje claro: <em>hoy nace quien convierte el detalle en destino</em>.</p>
      <p>El cosmos se configura con la precisión de un reloj invisible: <strong>Virgo</strong> es ese arte de ajustar tornillos ocultos hasta que la vida suena afinada. No es rigidez, es melodía; no es juicio, es cuidado. Quien llega bajo esa partitura aprende a escuchar antes de hablar, a mirar la grieta y descubrirle sentido.</p>
      <p>Como en una canción de Los Cafres, tu energía recuerda que <em>el amor no se impone, vibra</em>. Eres la armonía que aparece en medio del ruido, la voz que se mezcla suave con el viento de la tarde. Y cada 8 de septiembre, el cielo entero parece cantar contigo: que la vida es más bella cuando se vive con verdad y con ritmo propio.</p>
    </section>

    <!-- Aviso + imagen cielo + fugaces -->
    <div class="sky-warning">✨ Mira el cielo: llegarán estrellas fugaces… ✨</div>
    <section class="reveal">
      <figure class="sky-glow" id="skyGlow">
        <img src="{{ url_for('static', filename='cielo_8_septiembre.jpg') }}" alt="Cielo del 8 de septiembre con pulso de luz">
        <div class="glow-curtain" id="skyCurtain"></div>
        <div class="stars-layer" id="starsLayer"></div>
      </figure>
    </section>

    <!-- Capa terrenal -->
    <section class="reveal maravillas-block" id="maravillas">
      <h2 class="h-sub" style="text-align:center;">Capa terrenal: maravillas del 8 de Septiembre</h2>
      <div class="freq-bar"></div>

      <div class="info-top" id="infoTop"><h3>1504 — El David de Miguel Ángel</h3></div>

      <figure class="maravilla-figure" aria-label="Maravilla">
        <img id="marPic1" alt="Maravilla 1">
        <img id="marPic2" alt="Maravilla 2">
      </figure>

      <div class="info-box" id="infoBox"></div>
    </section>

    <!-- 2001 -->
    <section class="reveal">
      <h2 class="h-sub">08 de septiembre de 2001: nació Dara Joana Galindo Niño</h2>
      <p>Ese día, el cielo se comportó como un mar en calma: las olas brillaban al ritmo de una música silenciosa, y la Luna parecía bajar un poco más para iluminar la escena. El universo se ajustó como si afinara sus cuerdas invisibles, y cada estrella latía con la paciencia de quien prepara una melodía perfecta. Era un día para el detalle, para la justicia suave, para la mirada que reconoce lo esencial en lo pequeño.</p>

      <!-- Foto flotante con badge -->
      <div class="dara-float">
        <figure class="dara-card">
          <span class="dara-badge">Dara Joana</span>
          <img src="{{ url_for('static', filename='dara_joana_nina.jpg') }}" alt="Dara Joana niña">
        </figure>
      </div>

      <p>Ese día, <strong>Mercurio</strong> dibujaba rutas invisibles en el aire, enseñando que la palabra puede ser tan filosa como un bisturí o tan dulce como un susurro. Por eso en ti, cada argumento es arte: no hablas para llenar el aire, hablas para ordenar el mundo. A lo lejos, <strong>Saturno</strong> observaba como un maestro paciente: recordando que el tiempo no se pierde cuando se usa para crecer. En ti, Saturno se volvió disciplina: en el estudio, en el cuerpo, en tu resiliencia.</p>
      <p>Entonces, el cielo dobló la rodilla. La luz probó tonos de <strong>negro</strong> y <strong>morado</strong> y decidió que esos serían tus colores de batalla: el negro, refugio profundo; el morado, sabiduría que asciende. Desde entonces caminas con un compás invisible: el del cuidado exacto, la palabra justa, la mirada que atraviesa y ordena.</p>
      <p>Te gusta el <em>gym</em> porque entendiste que el cuerpo también escribe poemas cuando respira a ritmo. Odias la crítica hueca, los opinadores sin obra: tu mundo está hecho de cosas que se pueden sostener con la mano y con el alma. Pintas demonios, sí, pero no para invocarlos: para <em>renombrarlos</em>. Cuando los nombras, los domas; cuando los domas, hacen fila y se convierten en tinta. <strong>Rihana Joseffa</strong> te acompaña como una campana suave; <strong>Kiara</strong> dejó una constelación que todavía guía. Y en el fondo, una música: <strong>Los Cafres</strong>. Cada canción suya te recuerda que resistir también es una forma de amar.</p>
    </section>

    <!-- GIFs mascotas -->
    <section class="reveal">
      <div class="pets-wrap" id="petsWrap">
        <figure class="pet-card">
          <img src="{{ url_for('static', filename='rihana.gif') }}" alt="Rihana Joseffa">
          <figcaption class="pet-caption">Rihana Joseffa — compañía fiel, campana suave que marca el regreso.</figcaption>
        </figure>
        <figure class="pet-card">
          <img src="{{ url_for('static', filename='kyara.gif') }}" alt="Kyara">
          <figcaption class="pet-caption">Kyara — constelación que guía: amor que no se apaga, camino que recuerda.</figcaption>
        </figure>
      </div>
    </section>

    <!-- Hoy -->
    <section class="reveal">
      <h2 class="h-sub">Hoy</h2>
      <p>Hoy entras a un lugar y el ruido baja. No porque grites, sino porque tienes la <em>frecuencia</em> que ordena. Eres mi abogada favorita, la que entiende que la justicia no es un papel: es una respiración correcta.</p>
      <p>Te encantan las tardes porque el sol, al inclinarse, te da el beso que mereces: la luz se hace morada, el negro se hace elegante, y el día acepta que eres tú quien lo cierra con llave.</p>
      <p>Desde aquel cielo hasta este presente, <strong>el universo me regaló la fortuna de caminar contigo</strong>. Donde pasas, dejas una estela que no se apaga: no sólo brillas, <em>enseñas a brillar</em>.</p>
    </section>

    <!-- Frase -->
    <section class="reveal">
      <h2 class="h-sub">Frase de cumpleaños</h2>
      <p>Aunque el mundo cuente hazañas y el cielo encienda prodigios, <strong>el acontecimiento</strong> que da sentido a cada 8 de septiembre eres tú, Dara. Ese día, el cielo eligió a Mercurio como tu guía: veloz mensajero de los dioses, planeta de las palabras que sanan y de los pensamientos que iluminan. Por eso en ti, cada argumento tiene alma, cada defensa tiene verdad, y cada silencio guarda sabiduría.</p>
      <p><strong>Mercurio</strong> brilla en tu vida como faro en movimiento: te enseña a transformar la duda en claridad, el caos en orden, la oscuridad en camino. Su órbita rápida refleja tu mente despierta; su brillo discreto recuerda que no hace falta gritar para cambiar un mundo, basta hablar con verdad.</p>
      <p>Hoy, en tu cumpleaños, deseo que Dios te colme de infinitas bendiciones, que todos tus sueños y metas se hagan realidad, y que cada día recibas la luz que mereces. Que esta página web sea la prueba de lo importante que eres, un espejo eterno para que cada vez que la abras recuerdes sin dudarlo: <strong>eres única, eres especial, eres amada</strong>.</p>
    </section>

    <div style="margin-top:28px;">
      <a class="btn-metal" href="{{ url_for('landing') }}">Volver</a>
    </div>
  </main>

  <!-- ================== JS COMPLETO ================== -->
  <script>
    /* Reveal */
    (function(){
      const els=document.querySelectorAll('.reveal');
      const io=new IntersectionObserver((entries)=>{
        entries.forEach(en=>{ if(en.isIntersecting) en.target.classList.add('in-view'); });
      },{threshold:.15});
      els.forEach(el=>io.observe(el));
    })();

    /* Player persistente */
    (function(){
      const audio=document.getElementById('bgm'); if(!audio) return;
      const STATE='bgmStateV2';
      const PLAYLIST=[
        {src:"{{ url_for('static', filename='loscafresBastara.mp3') }}",title:"Los Cafres — Bastará"},
        {src:"{{ url_for('static', filename='bob_marley.mp3') }}",title:"Bob Marley — Could You Be Loved"},
        {src:"{{ url_for('static', filename='los_cafres_sielamorsecae.mp3') }}",title:"Los Cafres — Si el amor se cae"}
      ];
      const prevBtn=hdrPrev, playBtn=hdrPlay, nextBtn=hdrNext, repBtn=hdrRepeat, now=nowPlaying, bar=trackBar, txt=trackText;
      function load(){ try{const r=localStorage.getItem(STATE); return r?JSON.parse(r):null }catch{return null} }
      function save(i){ try{localStorage.setItem(STATE,JSON.stringify({time:audio.currentTime||0,playing:!audio.paused,track:i}))}catch{} }
      function ui(p,t){ if(bar&&txt){ if(p){bar.classList.add('playing');txt.textContent=`Ambientación: ${t} • Sonando… •`} else{bar.classList.remove('playing');txt.textContent='Ambientación lista'} } if(now) now.textContent=p?`Now Playing: ${t}`:'Ambientación lista'; if(playBtn) playBtn.textContent=p?'⏸':'▶'; }
      let loop=false, i=0; const st=load(); if(st&&Number.isFinite(st.track)) i=st.track;
      function set(){ audio.src=PLAYLIST[i].src; }
      audio.volume=.9; set(); if(st&&Number.isFinite(st.time)) audio.currentTime=Math.max(0,st.time-.2); if(st&&st.playing){ audio.play().catch(()=>{}); } ui(!audio.paused,PLAYLIST[i].title);
      function next(auto=false){ i=(i+1)%PLAYLIST.length; const was=!audio.paused||auto; set(); audio.currentTime=0; if(was) audio.play().catch(()=>{}); ui(!audio.paused,PLAYLIST[i].title); save(i); }
      function prev(){ i=(i-1+PLAYLIST.length)%PLAYLIST.length; const was=!audio.paused; set(); audio.currentTime=0; if(was) audio.play().catch(()=>{}); ui(!audio.paused,PLAYLIST[i].title); save(i); }
      prevBtn?.addEventListener('click',prev);
      nextBtn?.addEventListener('click',()=>next(false));
      playBtn?.addEventListener('click',async()=>{ if(audio.paused){ try{await audio.play();}catch{} } else audio.pause(); ui(!audio.paused,PLAYLIST[i].title); save(i); });
      repBtn?.addEventListener('click',()=>{ loop=!loop; audio.loop=loop; repBtn.classList.toggle('active',loop); });
      ['timeupdate','play','pause'].forEach(e=>audio.addEventListener(e,()=>{ ui(!audio.paused,PLAYLIST[i].title); save(i); }));
      audio.addEventListener('ended',()=>{ if(!audio.loop) next(true); });
      addEventListener('beforeunload',()=>save(i));
    })();

    /* Estrella fugaz global (diagonal) */
    (function(){
      const star=document.getElementById('shootingStar'); if(!star) return;
      const reduce=matchMedia('(prefers-reduced-motion: reduce)'); if(reduce.matches){ star.style.display='none'; return; }
      let flying=false, nxt=null;
      const R=(a,b)=>Math.random()*(b-a)+a;
      function shoot(){ if(flying) return; const vw=innerWidth, vh=innerHeight; const y0=R(vh*.10, vh*.45), x0=-Math.max(80,vw*.08), x1=vw+Math.max(120,vw*.12), y1=y0+R(vh*.20,vh*.38), dur=R(3,6);
        star.style.setProperty('--x0',`${x0}px`); star.style.setProperty('--y0',`${y0}px`); star.style.setProperty('--x1',`${x1}px`); star.style.setProperty('--y1',`${y1}px`); star.style.setProperty('--dur',`${dur}s`);
        star.classList.remove('shooting'); void star.offsetWidth; flying=true; star.classList.add('shooting');
        setTimeout(()=>{ flying=false; clearTimeout(nxt); nxt=setTimeout(shoot, R(12,28)*1000); }, dur*1000);
      }
      nxt=setTimeout(shoot, R(2,8)*1000);
      addEventListener('resize',()=>{ if(!flying){ clearTimeout(nxt); nxt=setTimeout(shoot,1500); }});
    })();

    /* Ráfagas pequeñas sobre el cielo */
    (function(){
      const curtain=document.getElementById('skyCurtain'), layer=document.getElementById('starsLayer'); if(!curtain||!layer) return;
      function mk(dir,x,y,d){ const s=document.createElement('div'); s.className='tiny-star'; s.style.left=x+'px'; s.style.top=y+'px'; const anim=(dir==='ne'?'diag-ne':dir==='nw'?'diag-nw':'diag-s'); s.style.animation=`${anim} ${d}ms linear forwards`; s.addEventListener('animationend',()=>s.remove()); layer.appendChild(s); }
      function burst(){ const r=layer.getBoundingClientRect(); const c=4+Math.floor(Math.random()*4); for(let k=0;k<c;k++){ const dir=(k%3===0)?'ne':(k%3===1)?'nw':'s'; const x=Math.floor(r.width*(.10+Math.random()*.8)); const y=-30-Math.floor(Math.random()*60); const d=700+Math.floor(Math.random()*700); setTimeout(()=>mk(dir,x,y,d),k*90); } }
      curtain.addEventListener('animationiteration', burst);
      setInterval(burst, 4200+Math.floor(Math.random()*1800));
    })();

    /* Maravillas: datos + carrusel auto */
    (function(){
      const data=[
        { title:"1504 — El David de Miguel Ángel",
          img:"{{ url_for('static', filename='david_miguel_angel_1504.jpg') }}",
          html:"<p><strong>El corazón del mármol.</strong> Florencia vio despertar al <em>David</em>. No era sólo piedra: era un pulso escondido; la quietud que sostiene una decisión justa. Miguel Ángel retiró lo superfluo hasta dejar la verdad al desnudo.</p><p>Su mirada no es de soberbia, sino de foco: la serenidad que antecede al acto correcto.</p><ul class='nice-list'><li>La lección: <em>quitar</em> también es crear; simplificar es revelar.</li><li>Tu espejo: ordenas lo complejo hasta que la forma justa aparece sin gritar.</li></ul>"
        },
        { title:"1565 — Fundación de San Agustín, Florida",
          img:"{{ url_for('static', filename='san_agustin_florida_1565.jpg') }}",
          html:"<p><strong>La ciudad que aprendió a quedarse.</strong> San Agustín, el asentamiento más antiguo de EE. UU., resistió tormentas, cambios y olvidos.</p><p>Perseverar no es quedarse inmóvil: es saber cuándo anclar y cuándo abrir velas.</p><ul class='nice-list'><li>La lección: lo que perdura no siempre hace ruido.</li><li>Tu espejo: resiliencia suave; firmeza que no necesita alardes.</li></ul>"
        },
        { title:"1966 — Nace Star Trek",
          img:"{{ url_for('static', filename='star_trek.jpg') }}",
          html:"<p><strong>Pasaporte para soñar.</strong> La pantalla se volvió nave, el guion un mapa del porvenir. <em>Star Trek</em> nos dijo que explorar también es un acto ético.</p><p>Futuro no es casualidad: es método, brújula y equipo.</p><ul class='nice-list'><li>La lección: imaginar también es construir.</li><li>Tu espejo: tus proyectos viajan lejos y vuelven con esperanza utilizable.</li></ul>"
        },
        { title:"1997 — Lunar Prospector despega",
          img:"{{ url_for('static', filename='lunar_prospector_1997.jpg') }}",
          html:"<p><strong>Linterna para la Luna.</strong> El <em>Lunar Prospector</em> buscó agua en la sombra: la paciencia como forma de luz. Preguntar bien abre cavidades secretas.</p><p>Hay verdades que sólo aparecen cuando el instrumento es preciso y la mirada, constante.</p><ul class='nice-list'><li>La lección: la luz también es método.</li><li>Tu espejo: a tu detalle le nacen respuestas que a otros se les pierden.</li></ul>"
        },
        { title:"2004 — Los Cafres y el reggae romántico",
          img:"{{ url_for('static', filename='cafres_cafres.jpg') }}",
          html:"<p><strong>El rumor del amor sincero.</strong> Con Los Cafres, el reggae se volvió confidencia: <em>Bastará</em>, <em>Si el amor se cae</em>. El amor no se impone: vibra hasta ordenar la vida.</p><p>La palabra puede ser hogar cuando no miente y cuando cuida.</p><ul class='nice-list'><li>La lección: verdad antes que pose.</li><li>Tu espejo: tu voz convence sin alzar la voz.</li></ul>"
        }
      ];
      const pic1=document.getElementById('marPic1'), pic2=document.getElementById('marPic2'), top=document.getElementById('infoTop'), box=document.getElementById('infoBox');
      let i=0, showing=pic1;
      function setContent(e){ top.innerHTML=`<h3>${e.title}</h3>`; box.innerHTML=e.html; }
      function show(el,src){ el.src=src; el.className='show'; }
      function hide(el){ el.className='hide'; }
      function cycle(){ const n=data[i]; setContent(n); if(showing===pic1){ hide(pic1); show(pic2,n.img); showing=pic2; } else { hide(pic2); show(pic1,n.img); showing=pic1; } i=(i+1)%data.length; }
      setContent(data[0]); show(pic1,data[0].img); setInterval(cycle,7000);
    })();

    /* GIFs mascotas: mostrar leyenda al entrar */
    (function(){
      const cards=[...document.querySelectorAll('.pet-card')]; if(!cards.length) return;
      const io=new IntersectionObserver((en)=>{ en.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('on'); }); },{threshold:.35});
      cards.forEach(c=>io.observe(c));
    })();
  </script>
</body>
</html>
