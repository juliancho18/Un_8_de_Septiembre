<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>¿Qué pasó un 8 de septiembre?</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='logo_xxx.ico') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    header.sticky {
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: blur(6px);
      background: rgba(0,0,0,0.35);
      border-bottom: 1px solid rgba(255,255,255,0.15);
      padding: 12px 16px;
    }
    .title-mystic {
      margin: 0; font-size: 1.4rem; letter-spacing: 0.5px;
      text-align: center;
    }
    .marquee { white-space: nowrap; overflow: hidden; }
    .marquee span { display: inline-block; padding-left: 100%; animation: scroll-left 15s linear infinite; }
    @keyframes scroll-left { from{transform:translateX(0)} to{transform:translateX(-100%)} }
    .page-wrap { max-width: 900px; margin: 24px auto; padding: 0 16px 64px; }
    section h2 { margin-top: 28px; }
    section p  { line-height: 1.7; opacity: 0.95; }
  </style>
</head>
<body style="background-image: url('{{ url_for('static', filename='galaxia_3.jpg') }}');">
  <div class="bg-overlay"></div>

  <!-- Audio (retoma estado) -->
  <audio id="bgm" src="{{ url_for('static', filename='loscafresBastara.mp3') }}" preload="auto" playsinline></audio>

  <header class="sticky">
    <h1 class="title-mystic">¿Qué pasó un 8 de septiembre?</h1>
    <div class="marquee" style="font-size:0.9rem; opacity:0.9;">
      <span>Ambientación: Los Cafres — Bastará • Sonando en esta página • </span>
    </div>
  </header>

  <main class="page-wrap">
    <section>
      <h2>1. Señales en el cielo</h2>
      <p>
        Ese día, el calendario se abre como un mapa estelar: las horas caen como
        constelaciones y cada minuto parece alinearse con un propósito secreto.
        Los antiguos habrían dicho que el destino afila su pluma para escribir
        sobre el viento.
      </p>
    </section>

    <section>
      <h2>2. Ecos de la historia</h2>
      <p>
        En la memoria del mundo, el 8 de septiembre deja huellas: descubrimientos,
        nacimientos, comienzos y promesas. No es casualidad: es la fecha que
        redibuja horizontes y enciende rutas para corazones atentos.
      </p>
    </section>

    <section>
      <h2>3. El susurro que te nombra</h2>
      <p>
        Pero el verdadero misterio ocurre cuando tu nombre se pronuncia: el día
        cobra sentido, las puertas se abren y el tiempo, por un instante,
        aprende a latir a tu ritmo.
      </p>
    </section>

    <div style="margin-top:28px;">
      <a class="btn-metal" href="{{ url_for('landing') }}">Volver</a>
    </div>
  </main>

  <script>
  const STATE_KEY = 'bgmState';
  function saveState(audio){
    try{ localStorage.setItem(STATE_KEY, JSON.stringify({time: audio.currentTime||0, playing: !audio.paused})); }catch(e){}
  }
  function loadState(){
    try{ const raw = localStorage.getItem(STATE_KEY); return raw? JSON.parse(raw): null; }catch(e){ return null; }
  }
  document.addEventListener('DOMContentLoaded', async () => {
    const audio = document.getElementById('bgm');
    audio.volume = 0.9;
    const prev = loadState();
    if (prev && Number.isFinite(prev.time)) audio.currentTime = Math.max(0, prev.time - 0.2);
    if (prev && prev.playing) { try{ await audio.play(); }catch(e){} }
    audio.addEventListener('timeupdate', ()=>saveState(audio));
    audio.addEventListener('play', ()=>saveState(audio));
    audio.addEventListener('pause', ()=>saveState(audio));
    audio.addEventListener('ended', ()=>{ audio.currentTime=0; saveState(audio); });
    window.addEventListener('beforeunload', ()=>saveState(audio));
  });
  </script>
</body>
</html>
